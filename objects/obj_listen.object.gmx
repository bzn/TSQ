<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="7" enumb="66">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var val = ds_map_find_value(iap_data, "type");
switch (val)
{
    case iap_ev_purchase:
        var map = ds_map_create();
        var purchase_id = ds_map_find_value(iap_data, "index");
        iap_purchase_details(purchase_id, map);
        if ds_map_find_value(map, "status") == iap_purchased
        {
            var product_id = ds_map_find_value(map, "product");
            ds_map_replace(global.purchaseMap, product_id, 1);
            switch(product_id)
            {
                case "h04": scr_unlock_hero_free(4); break;
                case "h05": scr_unlock_hero_free(5); break;
                case "h06": scr_unlock_hero_free(6); break;
                case "h07": scr_unlock_hero_free(7); break;
                case "h08": scr_unlock_hero_free(8); break;
                case "h09": scr_unlock_hero_free(9); break;
                case "h10": scr_unlock_hero_free(10); break;
                case "h11": scr_unlock_hero_free(11); break;
                case "h12": scr_unlock_hero_free(12); break;
                case "h13": scr_unlock_hero_free(13); break;
                case "h14": scr_unlock_hero_free(14); break;
                case "h15": scr_unlock_hero_free(15); break;
                case "h16": scr_unlock_hero_free(16); break;    

                case "3wc":               
                case "12wc":
                case "10db":
                case "40db":
                case "vp":
//                case "catchthehaggis_gold":
//                case "catchthehaggis_mac_gold":
                    iap_consume(product_id);
                break;               
            }
        }
        ds_map_destroy(map);
    break;
    
    case iap_ev_consume:
        var product_id = ds_map_find_value(iap_data, "product");
        if ds_map_find_value(iap_data, "consumed")
        {
            ds_map_replace(global.purchaseMap, product_id, 0);
            
            switch(product_id)
            {
                case "3wc":     
                    global.nowCoin += 30000;   
                    show_message_async("成功購買 30,000 銀幣"); 
                break;
                case "12wc":    
                    global.nowCoin += 120000;   
                    show_message_async("成功購買 120,000 銀幣");
                break;
                case "10db":
                    global.nowDBall += 10;   
                    show_message_async("成功購買 10 龍珠");   
                break;
                case "40db":
                    global.nowDBall += 40;      
                    show_message_async("成功購買 40 龍珠");
                break;
                case "vp":
                    global.nowDBall += 100;
                    global.nowCoin += 300000;
                    show_message_async("成功購買 超值組合包");
                break;
            }
        }
    break;
    
}
ds_map_secure_save(global.purchaseMap, "iap_data.json");

global.loading.isActive = false;
global.shine.isShine = true;

scr_save_game();
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
